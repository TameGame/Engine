<!DOCTYPE html>
<html>
    <!-- Simple test page for the WebGL renderer -->
    <head>
        <script src="../TameGame.js" type="text/javascript"></script>
    </head>
    <body>
        <canvas width=800 height=600 id="testCanvas"></canvas>
        
        <script type="text/javascript">
            try {
                var canvas = document.getElementById("testCanvas");
                var renderer = new TameGame.WebGlRenderer(canvas);
            } catch (e) {
                alert(e);
            }
            
            var rotation = 0;
            
            function doRender() {
                var queue = new TameGame.StandardRenderQueue();
                queue.addItem({
                    action: TameGame.cameraActionName,
                    zIndex: -1,
                    center: { x: 0, y: 0 },
                    height: 4.0,
                    rotation: rotation
                });
                queue.addItem({
                    action: TameGame.spriteActionName,
                    zIndex: 0,
                    spriteId: 0,
                    position: {
                        topLeft: { x: -1, y: 1 },
                        topRight: { x: 1, y: 1 },
                        bottomLeft: { x: -1, y: -1 },
                        bottomRight: { x: 1, y: -1 }
                    }
                });

                renderer.performRender(queue);
            }

            function nextRender(now) {
                doRender();
                rotation = ((now/10000) * 360);
                
                if (rotation < 720) {
                    requestAnimationFrame(nextRender, canvas);
                } else {
                    rotation = 720;
                    doRender();
                }
            }
            
            requestAnimationFrame(nextRender, canvas);
        </script>
    </body>
</html>